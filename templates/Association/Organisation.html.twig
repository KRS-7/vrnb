{% extends 'base.html.twig' %}


{% block title %}{{ parent() }} | Organisation{% endblock %}
{# La page organisation bureau #}
{% block body %}

    <div class="container bureau_main">
<!-- Affichage de la photo d'accueil de la page -->
        {% if photoIntro is not empty %}
            <figure class="textcenter">
                <img src="{{ asset('photo-intro/'~ photoIntro) }}"
                     alt="Organisation de l'association Vélo Rando Nature Bruz">
                <figcaption class="fig">Organisation</figcaption>
            </figure>
        {% else %}
            <h1 class="titreEnTete"></h1>
        {% endif %}
    </div>
    <!-- Modif en tant qu'admin de la photo d'accueil -->
    <div class="col-lg-12">
        {% if is_granted("ROLE_ADMIN") %}
            <div class="boutonModifierTexte">
                <button class="button_show btn btn-outline-success">Modifier la photo</button>
            </div>
            <div class="form-group formulaire" id="form">
                {{ form(formPhotoIntro) }}
                <div class="mt-3 mb-5 text-center">
                    <p>{{ form_widget(formPhotoIntro.Enregistrer) }}</p>
                    <button class="button_close btn btn-outline-secondary">Annuler</button>
                </div>
            </div>
        {% endif %}
    </div>

    <!--Module jquery-orgchart-->
    <!--<li> rajoute une branche , <ul> fait continuer la branche-->
    <div class="container" id="left" >
        <ul id="organisation">
            <li >
                    <div class="card">
                        <div class="carte-entete membresBureau">
                            {% for user in users %}
                            {# Si il s'agit du Referent Président il s'affiche ici #}
                            {% if user.referents.getNom() == 'Président' %}
                                <p class="role_user">{{ user.referents.getNom() }}</p>
                        </div>
                        <div class="card-body col">
                            <p class="card-tex">{{user.prenom}}</p>
                            <p class="card-tex">{{user.nom}}</p>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>

                <div class="carte">
                    <div class="carte-entete membresBureau">
                        {% for user in users %}
                        {# Si il s'agit du Referent Vice Président il s'affiche ici #}
                        {% if user.referents.getNom() == 'Vice Président' %}
                        <p class="role_user">{{ user.referents.getNom() }}</p>
                    </div>
                    <div class="carte-corps">
                        <p class="carte-texte">{{  user.prenom }}</p>
                        <p class="carte-texte">{{  user.nom }}</p>
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>

                <ul>
                    <li>
                        <div class="card">
                            <div class="carte-entete membresBureau">
                                {% for user in users %}
                                {# Si il s'agit du Referent Trésorier il s'affiche ici #}
                                {% if user.referents.getNom() == 'Trésorier' %}
                                <p class="role_user">{{ user.referents.getNom() }}</p>
                            </div>
                            <div class="card-body">
                                <p class="card-tex">{{user.prenom}}</p>
                                <p class="card-tex">{{user.nom}}</p>
                            </div>
                            {% endif %}
                            {% endfor %}
                        </div>
                        <ul>
                            <li>
                                <div class="card">
                                    <div class="carte-entete membresBureau">
                                        {% for user in users %}
                                        {# Si il s'agit du Referent Vice Trésorier il s'affiche ici #}
                                        {% if user.referents.getNom() == 'Vice-Trésorier' %}
                                        <p class="role_user">{{ user.referents.getNom() }}</p>
                                    </div>
                                    <div class="card-body">
                                        <p class="card-tex">{{user.prenom}}</p>
                                        <p class="card-tex">{{user.nom}}</p>
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li>
                                <div class="card">
                                    <div class="carte-entete membresReferents">
                                        {% for user in users %}
                                        {# Si il s'agit du Referent photo et vidéo il s'affiche ici #}
                                        {% if user.referents.getNom() == 'Photo-Vidéo' %}
                                        <p class="role_user">{{ user.referents.getNom() }}</p>
                                    </div>
                                    <div class="card-body">
                                        <p class="card-tex">{{user.prenom}}</p>
                                        <p class="card-tex">{{user.nom}}</p>
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </li>

                            <li>
                                <div class="card">
                                    <div class="carte-entete membresReferents">
                                        {% for user in users %}
                                        {# Si il s'agit du Referent Mécanique il s'affiche ici #}
                                        {% if user.referents.getNom() == 'Mécanique' %}
                                        <p class="role_user">{{ user.referents.getNom() }}</p>
                                    </div>
                                    <div class="card-body">
                                        <p class="card-tex">{{user.prenom}}</p>
                                        <p class="card-tex">{{user.nom}}</p>
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </li>

                            <li>
                                <div class="card">
                                    <div class="carte-entete membresReferents">
                                        {% for user in users %}
                                        {# Si il s'agit du Referent Sécurité il s'affiche ici #}
                                        {% if user.referents.getNom() == 'Sécurité' %}
                                        <p class="role_user">{{ user.referents.getNom() }}</p>
                                    </div>
                                    <div class="card-body">
                                        <p class="card-tex">{{user.prenom}}</p>
                                        <p class="card-tex">{{user.nom}}</p>
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </li>

                            <li>
                                <div class="card">
                                    <div class="carte-entete membresReferents">
                                        {% for user in users %}
                                        {# Si il s'agit du Referent Communication il s'affiche ici #}
                                        {% if user.referents.getNom() == 'Communication' %}
                                        <p class="role_user">{{ user.referents.getNom() }}</p>
                                    </div>
                                    <div class="card-body">
                                        <p class="card-tex">{{user.prenom}}</p>
                                        <p class="card-tex">{{user.nom}}</p>
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                </div>

                    </li>
                    <!--<li>
                      <div class="card">
                        <div class="card-header">
                          Stagiaires
                        </div>
                        <div class="card-body">
                          <p class="card-text">Site Web</p>
                        </div>
                      </div>
                      <ul>
                        <li>Florian BARON</li>
                        <li>Nathalie NOEL LE ROSCOUET</li>
                        <li>Maxime THUAULT</li>
                        <li>Florence CORMANT</li>
                        <li>Christophe LECLERE</li>
                      </ul>
                    </li>-->
                    <li>
                        <div class="card">
                            <div class="carte-entete membresBureau">
                                {% for user in users %}
                                {# Si il s'agit du Referent Secrétaire il s'affiche ici #}
                                {% if user.referents.getNom() == 'Secrétaire' %}
                                <p class="role_user">{{ user.referents.getNom() }}</p>
                            </div>
                            <div class="card-body">
                                <p class="card-tex">{{user.prenom}}</p>
                                <p class="card-tex">{{user.nom}}</p>
                            </div>
                            {% endif %}
                            {% endfor %}
                        </div>

                        <ul>
                            <li>
                                <div class="card">
                                    <div class="carte-entete membresBureau">
                                        {% for user in users %}
                                        {# Si il s'agit du Referent Vice-Secrétaire il s'affiche ici #}
                                        {% if user.referents.getNom() == 'Vice-Secrétaire' %}
                                        <p class="role_user">{{ user.referents.getNom() }}</p>
                                    </div>
                                    <div class="card-body">
                                        <p class="card-tex">{{user.prenom}}</p>
                                        <p class="card-tex">{{user.nom}}</p>
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- Div d'affichage de l'organigramme généré au moyen de la fonction JS -->
    <div class = "container" id="content">
        <div id="main"></div>
    </div>


<!----------------------------------------------------------------------------------------------------------->
   <!--
    <div class="center-hr">
        <hr class="hr25-pourcent center">
    </div>

    <div class="centre-organisation">
        <div class="teste col-sm-12 col-lg-6">
            {# Partie Président #}
            {% for user in users %}
                {# Si il s'agit du Referent Président il s'affiche ici #}
                {% if user.referents.getNom() == 'Président' %}
                    <div class="president role_format">
                        <p class="role_user">{{ user.referents.getNom() }}</p>
                        <div class="prenom_nom_user ">
                            <p>{{ user.prenom }}</p>
                            <p>{{ user.nom }}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="teste col-sm-12 col-lg-6">
            {# Partie Trésorier #}
            {% for user in users %}
                {# Si il s'agit du Referent Président il s'affiche ici #}
                {% if user.referents.getNom() == 'Trésorier' %}
                    <div class="tresorier role_format">
                        <p class="role_user">{{ user.referents.getNom() }}</p>
                        <div class="prenom_nom_user ">
                            <p>{{ user.prenom }}</p>
                            <p>{{ user.nom }}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="teste col-sm-12 col-lg-6">
            {# Partie Secretaire #}
            {% for user in users %}
                {# Si il s'agit du Referent Président il s'affiche ici #}
                {% if user.referents.getNom() == 'Secrétaire' %}
                    <div class="secretaire role_format">
                        <p class="role_user">{{ user.referents.getNom() }}</p>
                        <div class="prenom_nom_user ">
                            <p>{{ user.prenom }}</p>
                            <p>{{ user.nom }}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="teste col-sm-12 col-lg-6">
            {# Partie Autres Référents #}
            {% for user in users %}
                {# Si il s'agit d'un Référent qui est différent de Président, Secrétaire, Trésorier et Adhérent, il s'affiche ici #}
                {% if user.referents.getNom() != 'Président' and user.referents.getNom() != 'Secrétaire'
                    and user.referents.getNom() != 'Trésorier' and user.referents.getNom() != 'Adhérent'
                    and user.referents.getNom() != 'Site web' %}
                    <div class="other role_format">
                        <p class="role_user">{{ user.referents.getNom() }}</p>
                        <div class="prenom_nom_user ">
                            <p>{{ user.prenom }}</p>
                            <p>{{ user.nom }}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="teste col-sm-12 col-lg-6">
            {# Partie Site Web #}
            {% for user in users %}
                {# Si il s'agit du Referent Site Web il s'affiche ici #}
                {% if user.referents.getNom() == 'Site web' %}
                    <div class="secretaire role_format">
                        <p class="role_user">{{ user.referents.getNom() }}</p>
                        <div class="prenom_nom_user ">
                            <p>{{ user.prenom }}</p>
                            <p>{{ user.nom }}</p>
                        </div>
                    </div>
                {% endif %}
                {% endfor %}
        </div>
    </div>
    -->

    {% block scripts %}
        <link rel="stylesheet" href="{{ asset('css/association/style.css') }}" />
        <link rel="stylesheet" href="{{ asset('css/association/orgchart.css') }}" />
        <link rel="stylesheet" href="{{ asset('css/association/jquery.orgchart.css') }}" />
        {% block JQuery %}{% endblock %}
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

        <script src="{{ asset('js/jquery.orgchart.js') }}"></script>
        <script>
            $(function () {
                $("#organisation").orgChart({ container: $("#main") });
            });
        </script>
    {% endblock %}

{% endblock %}